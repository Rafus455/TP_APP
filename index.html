<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP Application</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="head">
        <img src="icons/icon-128.png" alt="Logo Météo" width="100" height="100"> 
        <p>Centre météo</p>
    </div>

<div contenteditable="true" class="ville-input" id="ville" placeholder="Tapez une ville"></div>
<button id="recherche">Rechercher la ville</button>

<script>
const ACCESS_KEY = "4y-7VAiONHJruREqc7S7M39RGl83Vn4Mn3ilObGPcg0"; // Clé Unsplash

// Fonction pour changer l'arrière-plan selon la ville
function changerBackground() {
    const ville = document.getElementById("ville").innerText.trim();
    if(!ville) return;

    fetch(`https://api.unsplash.com/photos/random?query=${ville}&client_id=${ACCESS_KEY}`)
    .then(res => res.json())
    .then(data => {
        document.body.style.backgroundImage = `url(${data.urls.full})`;
        document.body.style.backgroundSize = "cover";
        document.body.style.backgroundPosition = "center";
    })
    .catch(err => console.log(err));
}

// Clique sur le bouton
document.getElementById("recherche").addEventListener("click", changerBackground);

// Touche Entrée dans le contenteditable
document.getElementById("ville").addEventListener("keydown", function(event) {
    if(event.key === "Enter") {
        event.preventDefault();   // empêche le retour à la ligne
        changerBackground();      // déclenche le changement de fond
    }
});
</script>
    
<script src="app.js"></script>
</body>

</html>